name = "gokkan-keeper-api"
main = "src/index.ts"
compatibility_date = "2024-01-15"

# Local development D1 database binding
[[d1_databases]]
binding = "DB"
database_name = "shared-db"
database_id = "local"  # Local development uses local SQLite file
migrations_dir = "../../migrations"

# Production environment
[env.production]
# 커스텀 도메인을 사용하려면 아래 주석을 해제하고 Cloudflare에 도메인을 설정하세요
# routes = [
#   { pattern = "api.gokkan-keeper.com", zone_name = "gokkan-keeper.com" }
# ]

[[env.production.d1_databases]]
binding = "DB"
database_name = "shared-db"
database_id = "894124e2-8236-4647-a3a0-bc8674865889"
migrations_dir = "../../migrations"

# R2 bucket (미래 사용을 위해 주석 처리)
# [[env.production.r2_buckets]]
# binding = "STORAGE"
# bucket_name = "gokkan-keeper-storage"

[env.production.vars]
NODE_ENV = "production"

